# generated by ansible
# data for configuration
# {{ item }}

process add_route {
        run /usr/bin/java -Dserver.address={{ item.announce_sender_ip }}  -Dserver.port={{ item.announce_sender_port }} -Dneighbor.ip={{ item.neighbor.neighbor_ip }} -DLOG_PATH=/var/log/irp/{{ item.name }}  -Dstate.backup.dir=/var/lib/irp/{{ item.name }} -XX:+UseG1GC -Xms{{ item.jvm_mem_min }} -Xmx{{ item.jvm_mem_max }} -XX:+UseStringDeduplication "-Xlog:gc:file=/var/log/irp/{{ item.name }}/gc.log:time,level,tags:filecount=5,filesize=100m" -Dlogging.config=/etc/irp/{{ item.name }}/logback.xml -jar /usr/lib/irp/announce-sender.jar;
        encoder text;
}

neighbor {{ item.neighbor.neighbor_ip }} {
        # {{ item.neighbor.name }} for {{ item.name }}
        router-id {{ item.neighbor.router_id }};
        local-address {{ item.neighbor.local_address }};
        local-as {{ item.neighbor.local_as }};
        peer-as {{ item.neighbor.peer_as }};
        hold-time {{ item.neighbor.hold_time }};
        adj-rib-out False;
        group-updates false;        api {
                processes [ add_route ];
                neighbor-changes;
        }

        capability {
                graceful-restart;
        }
        family {
                ipv4 unicast;
        }
}
