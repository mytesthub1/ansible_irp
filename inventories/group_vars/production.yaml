---
tier: production

generic_ntp_servers:
  - fqdn: 10.215.2.184
    maxsources: 1

api_user: auto
api_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65623931666130386665343837646463366635363837333533373538396130343362666261366462
          6232663363346437386532376663636661613463316431340a373063363538616637303130643136
          37646431383239356366663235363962333636306231306531393037333132383939353334333333
          6661613565343265330a313138383337333263316139623364383261326563653563633265353863
          63303231326265316430383431393361393463383037353264333632323438623933
frontend_fqdn: irp.servers.im
frontend_proto: http
common_monitoring_prometheus_alertmanagers_remote_https:
  - alertmanager.k8s.irp.servers.im

slack_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62393062353932616232323030336562316332323439343566633436313531626239343461346230
          3566386238343066313762653061393966656365626162660a396661326562656432336662333365
          36363030663163666130303134393539396533386537646538373437353866316161333361633537
          6130623235663138300a626235623330316534316166613362636235616261616634663464336237
          33373438346465346561646534333064343434393438316162333563653361366136653937343133
          6132383065396665353065333461616335383035386338316561
slack_webhook_url: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36363836386464333164623438393264626638613762393463343264316663646331306362396633
          3630306334663033383365326139313635343439316639330a313333356135646330326535306131
          36636361356432376333383932383063306663306639383366316464666362346439623238376536
          3466376137613665380a336565346664313936386636663531633363393561336235646130303830
          34306531343136656430343262313963643862366531623132303030633765323933326362633036
          35386664336439383834336332373439373533383830343434626239643237653335393937623135
          61366632663862623133653530646237313830663539656233643638366139316164613161306636
          62313766393336373331

redis_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65656666366133373635323737306133383238306361643630346439366334386665303063623466
          3531613534623731313031316236353362316534323362300a363838343530323435353931366339
          37383037623430386433353061376662643462356166656263656233306432633061333736613763
          3635313331323463340a383932363736386262656666653765663334303633376665303635353362
          64633662316435633162666539326538636137333363393339623631613337313430373161333931
          31336562343332616235663333303135633239356331343162633635326663346464336531333535
          34386463636137356562323434336432616166366361326264643734663336656532353161383131
          35383162353033343131346563306139666266356364633562303530636632373938306139643566
          3332

flow_storage_clickhouse:
  - hosts:
      - clickhouse-us4.flow-storage.irp.servers.im
      - clickhouse-us5.flow-storage.irp.servers.im
    db: flows_dist
    user: irp
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61653836363339323664663661656564373139336234643637626661303034373032623861323565
          6364373064373838373465326131303963376566643734330a633565313738346133383935353136
          66353863333936353164393931623737636331626563653461333133373033353165653038316438
          3330333862393833310a343235313132333363313230336333616464656336613361393335356333
          65376339333534626635396534343964373530646461616365306662306635623039
  - hosts:
      - clickhouse-eu4.flow-storage.irp.servers.im
      - clickhouse-eu5.flow-storage.irp.servers.im
    db: flows_dist
    user: irp
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61653836363339323664663661656564373139336234643637626661303034373032623861323565
          6364373064373838373465326131303963376566643734330a633565313738346133383935353136
          66353863333936353164393931623737636331626563653461333133373033353165653038316438
          3330333862393833310a343235313132333363313230336333616464656336613361393335356333
          65376339333534626635396534343964373530646461616365306662306635623039
  - hosts:
      - flow-storage-mow1.flow-storage.irp.servers.im
      - flow-storage-mow2.flow-storage.irp.servers.im
    db: flows
    user: irp
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61653836363339323664663661656564373139336234643637626661303034373032623861323565
          6364373064373838373465326131303963376566643734330a633565313738346133383935353136
          66353863333936353164393931623737636331626563653461333133373033353165653038316438
          3330333862393833310a343235313132333363313230336333616464656336613361393335356333
          65376339333534626635396534343964373530646461616365306662306635623039
  - hosts:
      - flow-storage-sg1.flow-storage.irp.servers.im
      - flow-storage-sg2.flow-storage.irp.servers.im
    db: flows
    user: irp
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61653836363339323664663661656564373139336234643637626661303034373032623861323565
          6364373064373838373465326131303963376566643734330a633565313738346133383935353136
          66353863333936353164393931623737636331626563653461333133373033353165653038316438
          3330333862393833310a343235313132333363313230336333616464656336613361393335356333
          65376339333534626635396534343964373530646461616365306662306635623039

clickhouse_central_dbs:
  - name: rtt
    host: click5.irp.servers.im
    user: irp_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30373335333033613934336631633830356563343037643637633339316535363830383663626431
          3737336466643834383762363030323630633761303736340a303364366430623637306362333835
          37313833326535353961613966343133343838653634373334383232646237366136353937396234
          3863323865366534640a626537386635643738326339303466656264336235626632666435353734
          32366539386264356435333530306461396530316234353261633834386630353163
    networks: '{{ clickhouse_allowed_networks }}'
  - name: archive
    host: click6.irp.servers.im
    user: irp_archive
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65363432633936393565656561323137313331396263613239643664386662363135363436373833
          6633366662363330393533303964393138323335626263390a306336663765626263623635343965
          31663864373366643661333463656635616432353761306262333062383631303166643664663033
          3464376537343139330a353632626463306331623932613632346537646137336632663737303164
          31323939303734376531663731396532333762616465366238376165393334353438
    networks: '{{ clickhouse_allowed_networks }}'
  - name: live_rtt
    host: click7.irp.servers.im
    user: irp_live_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63393232653863393766353331393162303039646130633831316262353663626262303835303434
          3037393630613831396365656466343232396564303030630a376537323165633262346363396131
          36376435376634366465626535656131653664396361653735383034313237333430356635303532
          3465336564353761610a346133636135313232393263306137303536316661616335303838323863
          31326163626230663836333935326638303066353930343534383539373164663439
    networks: '{{ clickhouse_allowed_networks }}'
  - name: quality_solver_rtt
    host: click8.irp.servers.im
    user: irp_quality_solver_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31353365376130633238366262633864316638336364303431306639366463653931353064646333
          3532623062346361663363633735663336616166386561330a636432383935613737613734386165
          38393839353466656364353937363232336135643838366134326335646636313833313733396638
          3735333865323539330a373664383762656235393339346534383164616566643234343032346662
          33303730326163653239366466313835326332336334396134613932633834396461
    networks: '{{ clickhouse_allowed_networks }}'

kubernetes_nodes:
  - name: k8s-worker1.irp.servers.im-private
    ip: 10.215.0.164
  - name: k8s-worker1.irp.servers.im-public
    ip: 23.109.94.220
  - name: k8s-worker2.irp.servers.im-private
    ip: 10.215.1.44
  - name: k8s-worker2.irp.servers.im-public
    ip: 23.109.94.244
  - name: k8s-worker3.irp.servers.im-private
    ip: 10.215.0.228
  - name: k8s-worker3.irp.servers.im-public
    ip: 23.109.68.148
  - name: k8s-worker4.irp.servers.im-private
    ip: 10.215.0.100
  - name: k8s-worker4.irp.servers.im-public
    ip: 23.109.68.124

kubernetes_ingress_nodes:
  - name: k8s-worker1.irp.servers.im-private
    ip: 10.215.0.164
  - name: k8s-worker2.irp.servers.im-private
    ip: 10.215.1.44
  - name: k8s-worker3.irp.servers.im-private
    ip: 10.215.0.228

kubernetes_namespace: irp
kubernetes_context: irp-production

irp_provisioned_users:
  - email: initial@webzilla.com
    password: $2a$10$8RfHqvdHA1sDTbqnp3OGPedGKmjmV1.Sf/PsgkDQ6Tngp2TCipQcO
    role: ADMIN

conductor_bgp_feed_url: http://k8s-conductor-bgp-feed.irp.servers.im
quality_solvet_url: http://k8s-quality-solver.irp.servers.im

irp_api_host: https://irp.servers.im

k8s_cluster_issuer: letsencrypt-production

loki_fqdn: loki-irp.k8s.irp.servers.im
loki_endpoint: https://{{ loki_fqdn }}

postgres_k8s: true
postgres_effective_cache_size: 16384MB
postgres_shared_buffers: 2048MB
postgres_work_mem: 896MB
postgres_maintenance_work_mem: 1024MB
postgres_db_name: taco
postgres_db_username: irp
postgres_db_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63613338633661343932346439376631666638336266386130613432363931303231666231356266
          6234656230343038383562623563613739663938653265330a363061653366383462356562656166
          62613663396662353831306437366133323664346639303765663638373834613461313436323230
          3139373030343236320a646562633737313665386131363331313930326262663634353235323132
          37386630353332616662653230383031363266343831636438346261343566383433
postgres_s3_access_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64623432333163306264313637333637306332663136343265616332653737376530646563653862
          3135393234326130653666326439346265343136643933350a646234643035333136653466333136
          65323434326562663561353465303033313431613538633232313031376633633864323637326637
          6539323333346564350a363462626636613131626161333939653161363761323239383166396436
          65373066656230333133663364336230616639353766636361363539316263663934616539356532
          6466633839363463366430623033343066616439343635313830
postgres_s3_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33656630373435373132633732653236356531306635306633303331336636666362373132333564
          3839333035656133343764373062616633333765343537310a623765393034656533353636623730
          32303665346262666136323663633631643330393065343134326538346466356663643835313834
          3061386131663265640a303635643834363738626431613537313466356430386564343562313439
          66613839316462393233393133383137336337313765383535626366653637663534626665356338
          3932363061353566343332326139386338313439396439653938
postgres_s3_bucket: postgres-backups-prod
postgres_s3_endpoint: https://storage.files.nl01.cloud.servers.com:8080

postgres_bootstrap_config:
  pg_basebackup:
    database: "{{ postgres_db_name }}"
    owner: "{{ postgres_db_username }}"
    secret:
      name: postgres-irp-user
    source: prod

postgres_external_clusters:
  - name: prod
    connectionParameters:
      host: db5.irp.servers.im
      user: "{{ postgres_db_username }}"
      dbname: "{{ postgres_db_name }}"
    password:
      name: postgres-irp-user
      key: password

postgres_k8s_resources:
  requests:
    memory: "24Gi"
    cpu: 8
