---
tier: staging

generic_users: "{{ users + staging_users }}"

staging_users: []

irp_apt_repo_host: apt.dev.irp.servers.im
irp_taco_repo: '{{ irp_proposed_repo }}'

flow_storage_clickhouse:
  - hosts:
      - 23.83.115.132
      - 188.42.108.212
    db: flows
    user: irp
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64643266366661663564333531623334613630613039656632366562353637653063306264663134
          3236636137653330626232646239366363616161383933380a333135623737616262346530363736
          62376263636463643534323033626638656166313731316130343661336635643234333265363166
          3735323764636133380a663036356366623933613731363431636639323265616339373363633830
          61366234666464663937653963616464353665356633616665663137383537363261

irp_api_user: initial@webzilla.com
irp_api_password: iez8reetech3Ahja
irp_provisioned_users:
  - email: "{{ irp_api_user }}"
    # python3 -c 'import bcrypt; print(bcrypt.hashpw(b"password", bcrypt.gensalt()).decode("ascii"))'
    password: $2b$12$k/zuf2lWk1Gmcfmzk6Wm/.ZH/2yKInF1/gY6f01QsCQxU.T9p3zTO  # password: iez8reetech3Ahja
    role: ADMIN

irp_allow_notifications: false

k8s_cluster_issuer: letsencrypt-production
frontend_fqdn: ui.staging-k8s.irp.servers.im
irp_api_host: https://{{ frontend_fqdn }}
ipv4_additional_addresses: []
ipv4_aliases: []
provider_data: ""
account_gp_network: 10.82.150.0/23

kubernetes_namespace: irp-staging
kubernetes_context: irp-staging

kubernetes_nodes:
  - name: worker1-private
    ip: 10.82.151.170
  - name: worker1-public
    ip: 23.109.136.130
  - name: worker2-private
    ip: 10.82.150.82
  - name: worker2-public
    ip: 23.109.136.134
  - name: worker3-private
    ip: 10.82.150.250
  - name: worker3-public
    ip: 23.109.136.198
  - name: worker4-private
    ip: 10.82.150.122
  - name: worker4-public
    ip: 23.109.136.174
kubernetes_ingress_nodes:
  - name: worker1-private
    ip: 10.82.151.170
  - name: worker2-private
    ip: 10.82.150.82
  - name: worker3-private
    ip: 10.82.150.250
  - name: worker4-private
    ip: 10.82.150.122

postgres_db_name: taco
postgres_db_username: irp
postgres_db_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36396362366162353230396537646236323166653334373238383630346539663038343630646561
          6261663266343839376532346330626238393934663537380a303663613937373038613232633435
          31623735623931636337373737323933386138346435353936373935343532393965626433363634
          3863313366343933660a653637363363313939656338643137636533323464626635643832313462
          38626163626633663762316638346366356636336662623731663834633831623366
redis_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37626365346533313836653366343238303531663036626435393830656234313136653035376439
          3561656534633062333864396238626262373234333337640a646233383738343632633930346230
          38393639663233373234326565303633633538353330373939323038613266666137663937316436
          6535646536393730360a633532663662353161316337333063383463626435353432303834613135
          35623031343531633939333165373630633534633630653634663734626564363131643661666132
          64326265636430373661613063316233613862633462643261353335383437343866626533623838
          66383038623330666439343630376534303266613963646665313531646266623864366662613839
          31323061396133613562323235373434633363393539343938363961316432303931363764396237
          3663

mgmt_access_list_additional:
  - name: irp-test account
    cidr: 10.82.150.0/23
  - name: Jenkins Staging node
    cidr: 72.255.248.148/32
  - name: BO
    cidr: 192.168.247.58/32
  - name: BO
    cidr: 192.168.247.59/32
  - name: BO
    cidr: 192.168.247.60/32
  - name: m.kudrinskaya
    cidr: 192.168.238.115/32
  - name: m.kudrinskaya
    cidr: 173.237.66.115/32
  - name: m.kudrinskaya
    cidr: 192.168.239.115/32
  - name: m.kudrinskaya
    cidr: 173.237.67.115/32
  - name: d.staryy
    cidr: 173.237.66.110/32
  - name: d.staryy
    cidr: 192.168.238.110/32

irp_image_tag: "{{ lookup('env', 'IRP_IMAGE_TAG') | d('dev', true) }}"

clickhouse_central_dbs:
  - name: rtt
    host: click.staging-k8s.irp.servers.im
    user: irp_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39323235613266393534353138326139313339633264366332373032396432336261346436616232
          3437373935373163383863363435653138386239623864640a333038373836663565623464636461
          30386163366438636536353936643534386535306666373064316630613338656564373762643163
          6139666136343036660a613932633239393333356235646235366433303266323439396262643835
          3064
    networks: '{{ clickhouse_allowed_networks }}'
  - name: archive
    host: click.staging-k8s.irp.servers.im
    user: irp_archive
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36653731646262636130393962376134346664373665373565633439333934623338336135643035
          6566353538626334636534343938316433613733343038630a346237373637313661303861323937
          36663630656363623863393966343031623238363735366534343736303261333562656661373263
          6538323837393264390a666664313962336638323132356561306566393832303235313164366439
          6138
    networks: '{{ clickhouse_allowed_networks }}'
  - name: live_rtt
    host: click.staging-k8s.irp.servers.im
    user: irp_live_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32393762373234386135303930633639313366616335626538646462353036363539303034633763
          3935306430316134386432656637363737383230393130610a663463623131313964643765353036
          32383332336464643131633262336230366466613261653861313531663132376532613330343435
          6438343061643238380a623461363632376336353961323336326461363936643763323463336334
          39663539653361633531366362353234376430326261623266313538373764373831
    networks: '{{ clickhouse_allowed_networks }}'
  - name: quality_solver_rtt
    host: click.staging-k8s.irp.servers.im
    user: irp_quality_solver_rtt
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34366133306636333836373962626563666538623834636534626664306632636662303364646132
          3161623431616265323438333961366430636339653466650a656261376639323833643165613663
          36326663613865373533613236356266373833356632303333643032386433383632386636653261
          3065383461306361380a313236643330333166383666383034653135326265386461333931653236
          38313330643838633264356165363237643466353039303430373164313761616336
    networks: '{{ clickhouse_allowed_networks }}'

common_monitoring_prometheus_remote_alertmanagers:
  - scheme: https
    path_prefix: /
    static_configs:
      - targets:
          - alertmanager.staging-k8s.irp.servers.im
  - scheme: https
    path_prefix: /alertmanager
    static_configs:
      - targets:
          - rnd-tv-am.mirror.servers.com

common_monitoring_interface_public_redundant: false
common_monitoring_interface_public_speed: 1000
common_monitoring_interface_private_redundant: false
common_monitoring_interface_private_speed: 1000

loki_fqdn: loki-irp.staging-k8s.irp.servers.im
loki_endpoint: https://{{ loki_fqdn }}

postgres_k8s: true
postgres_cluster_name: postgres-cluster
postgres_storage_size: 100Gi
postgres_s3_access_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64623432333163306264313637333637306332663136343265616332653737376530646563653862
          3135393234326130653666326439346265343136643933350a646234643035333136653466333136
          65323434326562663561353465303033313431613538633232313031376633633864323637326637
          6539323333346564350a363462626636613131626161333939653161363761323239383166396436
          65373066656230333133663364336230616639353766636361363539316263663934616539356532
          6466633839363463366430623033343066616439343635313830
postgres_s3_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33656630373435373132633732653236356531306635306633303331336636666362373132333564
          3839333035656133343764373062616633333765343537310a623765393034656533353636623730
          32303665346262666136323663633631643330393065343134326538346466356663643835313834
          3061386131663265640a303635643834363738626431613537313466356430386564343562313439
          66613839316462393233393133383137336337313765383535626366653637663534626665356338
          3932363061353566343332326139386338313439396439653938
postgres_s3_bucket: postgres-backups-staging
postgres_s3_endpoint: https://storage.files.nl01.cloud.servers.com

postgres_storage_class: openebs-lvmpv

postgres_bootstrap_config: "{{ omit }}"
postgres_external_clusters: "{{ omit }}"
